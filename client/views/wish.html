<template name="wish">

    <li class="wish panel panel-default">

        <a data-toggle="collapse" data-parent="#accordion" href="#collapse-{{_id}}">
            <div class="panel-heading {{class_completed}}">
                {{#if hasPurchased}}<span class="glyphicon glyphicon-ok"></span>{{/if}}
                <span class="panel-title"> {{title}} </span>
                <span class="panel-title-price">(Ca pris {{price}} kr)</span>
            </div>
        </a>

        <div id="collapse-{{_id}}" class="panel-collapse collapse {{class_show}} ">
            <div class="panel-body">

                {{#if completed}}
                {{#unless hasPurchased}}
                <div class="alert alert-warning" role="alert">Denne er allerede kjøpt av noen andre.</div>
                {{else}}
                <div class="alert alert-info">Du har indikert at du har kjøpt denne</div>
                {{/unless}}
                {{/if}}


                {{!-- Really wish to move this carousel into its own template,
                but I don't know how to parameterize the template --}}


                <div id="carousel-{{_id}}" class="carousel slide">

                    <ol class="carousel-indicators">
                        {{#each indexedImages}}
                        <li data-target="#carousel-{{../_id}}" data-slide-to="{{index}}" class="{{active}}"></li>
                        {{/each}}
                    </ol>

                    <!-- Carousel items -->
                    <div class="carousel-inner">
                        {{#each indexedImages}}
                        <div class="item {{active}}">
                            <img src="{{url}}" alt/>
                        </div>
                        {{/each}}
                    </div>

                    <!-- Carousel nav -->
                    <a class="carousel-control left" href="#carousel-{{_id}}" data-slide="prev">&lsaquo;</a>
                    <a class="carousel-control right" href="#carousel-{{_id}}" data-slide="next">&rsaquo;</a>
                </div>

                <div class="action-info">

                    <div class="info-box">

                        <ul>
                            <li><a href="{{url}}">Lenke til produktside</a></li>
                            <li>Prissjikt: {{price}} kr</li>
                            <li class="items-left">
                                <span>Antall gjenværende</span>
                                <span>{{remaining}}</span>
                            </li>
                            <li class="items-wanted">
                                <span>Antall ønsket totalt</span>
                                <span>{{amount_wanted}}</span>
                            </li>
                        </ul>

                        <p>
                            {{description}}
                        </p>

                    </div>


                    <div class="action-panel">
                        <div data-wish-id={{_id}} class="count items-bought">
                            <span class="text">Jeg har kjøpt</span>
                            <span class="count">{{userBuyCount}}</span>
                            <a href="#" class="glyphicon glyphicon-plus-sign"></a>
                            <a href="#" class="glyphicon glyphicon-minus-sign"></a>
                        </div>
                    </div>

                    {{#if alertMessage}}
                    {{> alert}}
                    {{/if}}

                </div>
            </div>
        </div>
    </li>

</template>

<template name="alert">
        <div class="alert alert-{{alertLevel}} alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert"><span
                    aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            {{alertMessage}}
        </div>
</template>
